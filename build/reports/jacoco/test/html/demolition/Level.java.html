<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Level.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Demolition</a> &gt; <a href="index.source.html" class="el_package">demolition</a> &gt; <span class="el_source">Level.java</span></div><h1>Level.java</h1><pre class="source lang-java linenums">package demolition;

import java.util.List;

import org.checkerframework.checker.units.qual.min;

import jogamp.nativewindow.NativeWindowFactoryImpl;

import java.util.ArrayList;

public class Level {
    private List&lt;Enemy&gt; enemies;
    private List&lt;SolidWall&gt; solidWalls;
    private List&lt;BrokenWall&gt; brokenWalls;
    private List&lt;Bomb&gt; bombs;
    private List&lt;Empty&gt; empty;
    private Goal goal;
    private Player player;
    private List&lt;ExplosionTile&gt; explosionTiles;
    //Add bombs and explosions later

<span class="fc" id="L22">    public Level(){</span>
<span class="fc" id="L23">        this.enemies = new ArrayList&lt;Enemy&gt;();</span>
<span class="fc" id="L24">        this.solidWalls = new ArrayList&lt;SolidWall&gt;();</span>
<span class="fc" id="L25">        this.brokenWalls = new ArrayList&lt;BrokenWall&gt;();</span>
<span class="fc" id="L26">        this.empty = new ArrayList&lt;Empty&gt;();</span>
<span class="fc" id="L27">        this.bombs = new ArrayList&lt;Bomb&gt;();</span>
<span class="fc" id="L28">        this.explosionTiles = new ArrayList&lt;ExplosionTile&gt;();</span>
<span class="fc" id="L29">    }</span>

    // TODO: Refactor to only add game object and make it so getters handle casting, since everytime you want to add something to the level you will have to add new logic to level.
    public void addObject(GameObject object){
<span class="fc bfc" id="L33" title="All 2 branches covered.">        if (object instanceof Enemy){</span>
<span class="fc" id="L34">            this.enemies.add((Enemy) object);</span>
<span class="fc bfc" id="L35" title="All 2 branches covered.">        } else if (object instanceof SolidWall){</span>
<span class="fc" id="L36">            this.solidWalls.add((SolidWall) object);</span>
<span class="fc bfc" id="L37" title="All 2 branches covered.">        } else if (object instanceof BrokenWall){</span>
<span class="fc" id="L38">            this.brokenWalls.add((BrokenWall) object);</span>
<span class="fc bfc" id="L39" title="All 2 branches covered.">        } else if (object instanceof Empty){</span>
<span class="fc" id="L40">            this.empty.add((Empty) object);</span>
<span class="fc bfc" id="L41" title="All 2 branches covered.">        } else if (object instanceof Goal){</span>
<span class="fc" id="L42">            this.goal = (Goal) object;</span>
<span class="pc bpc" id="L43" title="1 of 2 branches missed.">        } else if (object instanceof Player){</span>
<span class="fc" id="L44">            this.player = (Player) object;</span>
<span class="nc bnc" id="L45" title="All 2 branches missed.">        } else if (object instanceof Bomb){</span>
<span class="nc" id="L46">            this.bombs.add((Bomb) object);</span>
<span class="nc bnc" id="L47" title="All 2 branches missed.">        } else if (object instanceof ExplosionTile){</span>
<span class="nc" id="L48">            this.explosionTiles.add((ExplosionTile) object);</span>
        }
<span class="fc" id="L50">    }</span>

    public GameObject getObjectAt(int x, int y){
<span class="nc" id="L53">        List&lt;GameObject&gt; objects = this.getGameObjects();</span>
<span class="nc bnc" id="L54" title="All 2 branches missed.">        for (GameObject object: objects){</span>
<span class="nc bnc" id="L55" title="All 4 branches missed.">            if (object.xPos == x &amp;&amp; object.yPos == y){</span>
<span class="nc" id="L56">                return object;</span>
            }
<span class="nc" id="L58">        }</span>
<span class="nc" id="L59">        return null;</span>
    }

    public List&lt;Bomb&gt; getBombs(){
<span class="nc" id="L63">        return this.bombs;</span>
    }

    public List&lt;Enemy&gt; getEnemies(){
<span class="fc" id="L67">        return this.enemies;</span>
    }

    public List&lt;SolidWall&gt; getSolidWalls(){
<span class="nc" id="L71">        return this.solidWalls;</span>
    }

    public List &lt;BrokenWall&gt; getBrokenWalls(){
<span class="fc" id="L75">        return this.brokenWalls;</span>
    }
    
    public Player getPlayer(){
<span class="fc" id="L79">        return this.player;</span>
    }

    public List&lt;Empty&gt; getEmpty(){
<span class="nc" id="L83">        return this.empty;</span>
    }
    
    public Goal getGoal(){
<span class="fc" id="L87">        return this.goal;</span>
    }

    public List&lt;ExplosionTile&gt; getExplosionTiles(){
<span class="fc" id="L91">        List&lt;ExplosionTile&gt; explosionTiles = this.explosionTiles;</span>
<span class="fc" id="L92">        List&lt;ExplosionTile&gt; newList = new ArrayList&lt;ExplosionTile&gt;();</span>
<span class="pc bpc" id="L93" title="1 of 2 branches missed.">        for (ExplosionTile tile: explosionTiles){</span>
<span class="nc bnc" id="L94" title="All 2 branches missed.">            if (!tile.isRemoved){</span>
<span class="nc" id="L95">                newList.add(tile);</span>
            }
<span class="nc" id="L97">        }</span>
<span class="fc" id="L98">        this.explosionTiles = newList;</span>
<span class="fc" id="L99">        return this.explosionTiles;</span>
    }

    // Gets all gameobjects in the order they are to be printed
    public List&lt;GameObject&gt; getGameObjects(){
<span class="fc" id="L104">        List&lt;GameObject&gt; GameObjects = new ArrayList&lt;GameObject&gt;();</span>
<span class="fc" id="L105">        GameObjects.addAll(empty);</span>
<span class="fc" id="L106">        GameObjects.addAll(solidWalls);</span>
<span class="fc" id="L107">        GameObjects.addAll(brokenWalls);</span>
<span class="fc" id="L108">        GameObjects.add(goal);</span>
<span class="fc" id="L109">        GameObjects.addAll(explosionTiles);</span>
<span class="fc" id="L110">        GameObjects.addAll(bombs);</span>
        
<span class="fc" id="L112">        List&lt;GameObject&gt; sorted = new ArrayList&lt;GameObject&gt;();</span>
<span class="fc" id="L113">        sorted.addAll(enemies);</span>
<span class="fc" id="L114">        sorted.add(player);</span>
        
<span class="fc" id="L116">        int minIndex = 0;</span>
<span class="fc" id="L117">        int minY = 1000; </span>
<span class="fc bfc" id="L118" title="All 2 branches covered.">        while (sorted.size() &gt; 0) {</span>
            // Find the object with the smallest y;
<span class="fc bfc" id="L120" title="All 2 branches covered.">            for (int i = 0; i &lt; sorted.size(); i++){</span>
<span class="fc" id="L121">                GameObject current = sorted.get(i);</span>
<span class="fc bfc" id="L122" title="All 2 branches covered.">                if (current.yPos &lt; minY){</span>
<span class="fc" id="L123">                    minY = current.yPos;</span>
<span class="fc" id="L124">                    minIndex = i;</span>
                }
            }
<span class="fc" id="L127">            GameObjects.add(sorted.get(minIndex));</span>
<span class="fc" id="L128">            sorted.remove(minIndex);</span>
<span class="fc" id="L129">            minY = 1000;</span>
        }
        

<span class="fc" id="L133">        return GameObjects;</span>
    }



    //public List &lt;Explosion&gt; getExplosions(){}
}

// T = new type, K = old type;
class Converter&lt;T extends K, K&gt; {
    private List&lt;K&gt; oldList;
    private Class newType;

<span class="nc" id="L146">    public Converter(List&lt;K&gt; oldList, Class newType){</span>
<span class="nc" id="L147">        this.oldList = oldList;</span>
<span class="nc" id="L148">        this.newType = newType;</span>
<span class="nc" id="L149">    }</span>

    @SuppressWarnings(&quot;unchecked&quot;)
    public List&lt;T&gt; toNewType(){
<span class="nc" id="L153">        List&lt;T&gt; newList = new ArrayList&lt;T&gt;();</span>
<span class="nc bnc" id="L154" title="All 2 branches missed.">        for (K element: oldList){</span>
<span class="nc bnc" id="L155" title="All 2 branches missed.">            if (element.getClass().getName().equals(newType.getName())){</span>
<span class="nc" id="L156">                newList.add((T) element);</span>
            }
<span class="nc" id="L158">        }</span>
<span class="nc" id="L159">        return newList;</span>
    }



    


}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>